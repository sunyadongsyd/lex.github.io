{"pages":[{"title":"about","text":"","link":"/about/index.html"}],"posts":[{"title":"Hexo 博客备份","text":"更极端的情况是突然有一天硬盘说坏就坏掉了，即使你能重新部署好站点，但所有之前写过的文章都已经随硬盘消失了。 Hexo官方文档并没有给出备份站点和文章的方法，得益于机智的网友，下面给出一个优雅的解决方案 备份方案实现备份依赖下面两个原理 我们写文章或者修改配置都是对项目源码的修改，执行hexo g命令才会渲染生成前台页面 执行hexo d命令会将渲染后的静态页面文件会提交到GitHub Pages的master分支保存和显示 显然，备份的目的在于将完整源码备份，这里需要用到一个新的分支（区别于master分支），将每次写文章或者修改配置后的源码提交到这个分支，而hexo d则会按以往方式将静态页面提交到master分支，这样就能将源码和静态文件完美区分开，并都保存到了站点的GitHub仓库中 完成上面操作就可以保证不论何时何地都可以拉取远程仓库的站点源码到本地，修改后再通过hexo g -d把静态页面发布到GitHub Page 原理解释完，具体实现步骤如下 新建分支在项目主页点击Branch，输入分支名称如hexo，点击Create 点击Setting下的Branch标签，设置hexo为默认分支 初始化分支代码新建一个站点文件夹，克隆项目仓库到本地 12mkdir bloggit clone git@github.com:username/username.github.io.git blog 拷贝原Hexo文件夹中的文件或目录到新的站点文件夹下，只需要如下几个： _config.yml：站点配置文件 themes/：主题文件夹 source：资源文件夹，包括博文 scffolds/：文章模板 package.json：安装包配置 .gitignore：如题 删除/themes/next/.git/文件夹 1rm -rf /themes/next/.git/ 安装软件包 12npm installnpm install hexo-deployer-git 生成并部署站点，这一步会将静态页面提交到master分支 1hexo g -d 提交源码到hexo分支 123git add .git ci -m 'backup init'git push 修改完成上面步骤站点就具有了备份的条件，每一次写文章或对站点做了修改后，需要执行上一节最后两步来完成备份 生成并部署 1hexo g -d 提交源码 123git add .git ci -m 'commit msg'git push 迁移如果更换了电脑或者环境，按以下步骤操作 安装Git和Node.js 配置SSH Key（参考） 克隆远程仓库到本地 git clone git@github.com:username/username.github.io.git blog 安装Hexo及其它软件包 123npm install -g hexo-clinpm installnpm install install hexo-deployer-git 完成后即可继续撰写和发布文章了","link":"/2019/11/20/01hexo/01%E5%8D%9A%E5%AE%A2%E5%A4%87%E4%BB%BD/"},{"title":"埃森哲被告上法庭：两年花两亿，连个可用的网站都不能交付","text":"耗费2个多亿，耗时2年多，连一个可用的网站或者APP都没有交付出来。 想要完工？那就再交1000万美元。 这件事的受害方、美国汽车租赁公司赫兹（Hertz）一怒之下， 将顶级咨询公司埃森哲（Accenture）告上了法庭。 故事起于2016年8月，赫兹想要改造自身的在线业务。 赫兹公司表示，当时他们被埃森哲一整天的展示打动了，邀请其来负责整个项目，包括设计、构建、测试和部署赫兹的新网站和移动应用程序。 按照双方的约定，新的网站要在2017年12月上线，开发周期为1年零4个月。尽管如此，上线时间还是频频延迟，先是到2018年1月，然后是2018年4月。 最后，赫兹公司发现，尽管又过去了5个月，埃森哲进行的产品和设计工作还没有达到整体要求的一半。 便一怒之下，中止双方的合作，将其告上法庭，称他们已经不再相信埃森哲有能力完成这个项目。 而且，赫兹还要求埃森哲赔偿项目费用3200万美元（约合2.15亿人民币）以及这一项目给公司带来的数百万美元损失。 埃森哲设计的到底是什么样的一个网站？这么难以交付？面对这个网站，赫兹为什么会如此“大动肝火”？ 在起诉书中，赫兹“痛斥”了埃森哲设计网站时的种种“罪状”。英国科技新闻网站The Register评论称，这是一个“来自地狱”的网站重新设计的故事。 痛斥埃森哲十大“罪状” 起诉书中，赫兹主要列举了埃森哲的十大“罪状”。 1、网站没有响应式设计 响应式设计，即网页能够自动调整大小来适应访问者的屏幕大小，无论他们使用的是手机、平板电脑、台式机还是笔记本电脑。 这是多年来设计网站的标准做法，这一要求也清楚地写进了合同。 但埃森哲的开发者只设计了电脑版和移动版的网站。想要适用于平板电脑的网站？麻烦再掏数十万美元。 2、无视可扩展性要求 赫兹表示，项目的架构规范明确规定，网站设计的一个基本原则是其可扩展性。也就是说，使用一个公共核心库，可以扩展到赫兹每个品牌的网站和移动应用程序。 但在赫兹不知道或不同意的情况下，埃森哲故意忽略了可扩展性要求，只是编写了仅供北美赫兹品牌使用的代码。而赫兹的其他品牌，都不适用。 3、代码有安全问题 在代码的编写上，埃森哲也存在问题。赫兹在起诉中称，埃森哲的开发者为面向客户的电子商务网站编写的代码，造成了严重的安全漏洞和性能问题。 因为代码中的缺陷非常普遍，他们不得不废弃埃森哲在这方面的所有工作。整个系统中的其他组件，大部分代码也都不可用。 4、未进行适当的测试 在这方面，赫兹“吐槽”了两点：一是系统中的许多组件，埃森哲都没有进行测试。二是进行测试的时候严重不足，甚至产生了误导性。 赫兹表示，埃森哲测试的时候，使用的是“Happy Path”方法。在众多围观的吃瓜群众看来，这要是能测出来问题，才怪…… 5、前端代码开发上有问题 在开发“集成层”（integration layer）的时候，埃森哲的开发团队很难理解赫兹的后端系统，比如预定和更改预定的系统等等， 以至于其很难编写用于整合层的软件。 赫兹称，埃森哲自己也承认了这方面存在问题。他们在2018年1月称“前端技术(Front End Technology，Angular2)是一个挑战。” 是的，Angular2。很多网友看到这一点的时候，都用“？”和“god”来形容自己的心情。 有人给出了一个解释是，稳定版的Angular 2是建立在不稳定的技术上的…… 赫兹认为，埃森哲也严重低估了其在FED上存在的问题。 在赫兹的团队接管了项目开发工作之后，完全抛弃了埃森哲的开发工作，因为他们认为埃森哲写的代码太烂了，根本无法挽救。 6、在AEM组件代码上存在严重缺陷 AEM组件，是允许赫兹创建、编辑和更改其网站内容的内容管理系统。但埃森哲并没有基于 Adobe AEM 原型开发代码和设计文件结构。 赫兹认为，这使得应用程序不可靠，并难以维护，后续的更新中也会变得非常麻烦，效率低下。 7、Java代码不符合标准 赫兹说，埃森哲写的Java代码，并没有遵循Java标准，逻辑性很差，很糟糕，很难维护。 ​ 8、买了技术许可，埃森哲也实施不了 赫兹在起诉书中提到，埃森哲的团队建议自己购买一种名为RAPID的技术的许可，这项技术可以简化新网站内容管理系统的开发。 他们遵循了这一建议，并获得了技术许可，但埃森哲却无法实施它。埃森哲的项目负责人承认，埃森哲“花费了大量的时间”将RAPID整合到赫兹的环境中。 9、项目管理失败 在项目的第二阶段，埃森哲替换了一些最重要的团队成员，包括产品负责人和架构师。 但新来者没有相同水平的经验，并且在交接过程中丢失了大量的背景知识。 埃森哲也承认，网站上线的延误和开发中遇到的困难，至少部分是由于项目期间“关键资源”的离开造成的。 10、只提供PDF版的视觉风格指南 赫兹说，尽管明确指出，埃森哲要以交互式的格式(而非静态PDF格式)开发视觉风格指南，甚至给提供了交互式样式指南作为范例，但埃森哲还是反复提供静态PDF格式的视觉风格指南。 直接提出这个问题后，埃森哲拒绝提供一个交互式视觉风格指南来弥补缺陷，想要交互式的？再拿数十万美元。 在以上种种因素的作用下，埃森哲迟迟没有交付一个可用的网站或者应用程序。而且，只要完成这个项目，赫兹还需要支付超过1000万美元的额外费用。 因为项目要再进行下去，还需要发现并纠正埃森哲工作中的缺陷，以及开发埃森哲本应交付但未能交付的功能。 赫兹终于忍无可忍，一纸诉状将埃森哲告上法庭。 埃森哲的发言人表示，这些指控毫无根据，并打算为自己的立场辩护。因为这是一个正在进行的法律问题，他们拒绝任何进一步评论。 大家怎么看？ 这一事件经过报道后，在各个社交媒体上引发了广泛的讨论。 大多数人的看法都是震惊，甚至觉得这是一个“洋葱新闻”。 有人觉得，是不是埃森哲转手就把这个项目外包出去了。有人表示，这是一个“巨额预算+巨大公司≠惊人结果”的教训。 也有不少网友对费用感到很敏感，认为3200万美元，就算是一个非常完美的网站也很贵了，更不用说没有响应式设计的网站了。 有业内人士表示，很多中小型的咨询公司只需要更少的费用，就能够完成1000倍以上的工作了，但这些公司对咨询品牌的痴迷，导致这些中小公司根本没有参与的机会。 甚至有人表示，只要给我500万就能设计出来一个完美的网站，顺势做起了自己网站设计开发的广告。 也有人直接站出来说，到哪能够找到这么好的工作？ 不过，也有网友保持理性客观的态度， 称期待听到埃森哲一面的说法。 你怎么看？ 此外，如果你对这次诉讼有更深的兴趣，请收好下面赫兹起诉书的传送门: https://regmedia.co.uk/2019/04/23/hertz-accenture-website.pdf — 完 —","link":"/2019/04/28/02%E6%96%B0%E9%97%BB/01%E5%9F%83%E6%A3%AE%E5%93%B22%E4%BA%BF%E9%A1%B9%E7%9B%AE/"},{"title":"01 安装go和beego后的环境变量设置","text":"安装beego 包含一些示例应用程序以帮您学习并使用 beego 应用框架。 您需要安装 Go 1.1+ 以确保所有功能的正常使用。 你需要安装或者升级 Beego 和 Bee 的开发工具: 12$ go get -u github.com/astaxie/beego$ go get -u github.com/beego/bee 为了更加方便的操作，请将 $GOPATH/bin 加入到你的 $PATH 变量中。请确保在此之前您已经添加了 $GOPATH 变量。 123456# 如果您还没添加 $GOPATH 变量$ echo 'export GOPATH=&quot;$HOME/go&quot;' &gt;&gt; ~/.profile # 或者 ~/.zshrc, ~/.cshrc, 您所使用的sh对应的配置文件# 如果您已经添加了 $GOPATH 变量$ echo 'export PATH=&quot;$GOPATH/bin:$PATH&quot;' &gt;&gt; ~/.profile # 或者 ~/.zshrc, ~/.cshrc, 您所使用的sh对应的配置文件$ exec $SHELL 想要快速建立一个应用来检测安装？ 1234$ cd $GOPATH/src$ bee new hello$ cd hello$ bee run Windows 平台下输入： 1234&gt;cd %GOPATH%/src&gt;bee new hello&gt;cd hello&gt;bee run 这些指令帮助您： 安装 beego 到您的 $GOPATH 中。 在您的计算机上安装 Bee 工具。 创建一个名为 “hello” 的应用程序。 启动热编译。 一旦程序开始运行，您就可以在浏览器中打开 http://localhost:8080/ 进行访问。 简单示例下面这个示例程序将会在浏览器中打印 “Hello world”，以此说明使用 beego 构建 Web 应用程序是多么的简单！ 123456789101112131415161718package mainimport ( &quot;github.com/astaxie/beego&quot;)type MainController struct { beego.Controller}func (this *MainController) Get() { this.Ctx.WriteString(&quot;hello world&quot;)}func main() { beego.Router(&quot;/&quot;, &amp;MainController{}) beego.Run()} 把上面的代码保存为 hello.go，然后通过命令行进行编译并执行： 12$ go build -o hello hello.go$ ./hello 这个时候你可以打开你的浏览器，通过这个地址浏览 http://127.0.0.1:8080 返回 “hello world”。 那么上面的代码到底做了些什么呢？ 首先我们导入了包 github.com/astaxie/beego。我们知道 Go 语言里面被导入的包会按照深度优先的顺序去执行导入包的初始化（变量和 init 函数，更多详情），beego 包中会初始化一个 BeeAPP 的应用和一些参数。 定义 Controller，这里我们定义了一个 struct 为 MainController，充分利用了 Go 语言的组合的概念，匿名包含了 beego.Controller，这样我们的 MainController 就拥有了 beego.Controller 的所有方法。 定义 RESTful 方法，通过匿名组合之后，其实目前的 MainController 已经拥有了 Get、Post、Delete、Put 等方法，这些方法是分别用来对应用户请求的 Method 函数，如果用户发起的是 POST 请求，那么就执行 Post 函数。所以这里我们定义了 MainController 的 Get 方法用来重写继承的 Get 函数，这样当用户发起 GET 请求的时候就会执行该函数。 定义 main 函数，所有的 Go 应用程序和 C 语言一样都是 main 函数作为入口，所以我们这里定义了我们应用的入口。 Router 注册路由，路由就是告诉 beego，当用户来请求的时候，该如何去调用相应的 Controller，这里我们注册了请求 / 的时候，请求到 MainController。这里我们需要知道，Router 函数的两个参数函数，第一个是路径，第二个是 Controller 的指针。 Run 应用，最后一步就是把在步骤 1 中初始化的 BeeApp 开启起来，其实就是内部监听了 8080 端口：Go 默认情况会监听你本机所有的 IP 上面的 8080 端口。 停止服务的话，请按 Ctrl+c。 下面为 windows 下的快捷操作批处理文件：在 %GOPATH%/src 目录下分别创建文件 step1.install-bee.bat 和 step2.new-beego-app.bat。 step1.install-bee.bat 文件内容： 12345set GOPATH=%~dp0..go build github.com\\beego\\beecopy bee.exe %GOPATH%\\bin\\bee.exedel bee.exepause step2.new-beego-app.bat 文件内容： 1234567891011@echo 设置 App 的值为您的应用文件夹名称set APP=coscms.comset GOPATH=%~dp0..set BEE=%GOPATH%\\bin\\bee%BEE% new %APP%cd %APP%echo %BEE% run %APP%.exe &gt; run.batecho pause &gt;&gt; run.batstart run.batpausestart http://127.0.0.1:8080 依次点击上面创建的两个文件即可快速开启 beego 之旅。以后只需要到您的应用目录下点击 run.bat 即可。","link":"/2020/01/04/03Go/01%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"},{"title":"01 Golang破解","text":"1.下载补丁：https://pan.baidu.com/s/1TT_IQ3LJ3vpREWZuePgKfg&amp;shfl=sharepset 拿到里面的jetbrains-agent.jar并粘贴到你的goland安装目录 “Help” -&gt; “Edit Custom VM Options …”在打开的vmoptions编辑窗口末行添加：-javaagent:你goland的安装目录\\jetbrains-agent.jar 2个文件都要改 3.输入注册码：然后打开goland 输入注册码： 1520E5894E2-eyJsaWNlbnNlSWQiOiI1MjBFNTg5NEUyIiwibGljZW5zZWVOYW1lIjoicGlnNiIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiJVbmxpbWl0ZWQgbGljZW5zZSB0aWxsIGVuZCBvZiB0aGUgY2VudHVyeS4iLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IklJIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUlMwIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiV1MiLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJSRCIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IlJDIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiREMiLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJEQiIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IlJNIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiRE0iLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJBQyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IkRQTiIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IkdPIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUFMiLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJDTCIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IlBDIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUlNVIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In1dLCJoYXNoIjoiODkwNzA3MC8wIiwiZ3JhY2VQZXJpb2REYXlzIjowLCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlLCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-DZ/oNHBfyho0XrrCJJvAOKg5Q1tLBgOdbCmzCKwkuM+Yryce0RoOi3OOmH6Ba/uTcCh/L37meyD0FJdJIprv59y4+n+k2kIeF/XKrKqg0dEsDUQRw0lUqqMt99ohqa+zmbJ44Yufdwwx/F1CtoRGvEQ2Mn0QjuqRoZJZ3wiT5Am22JiJW8MaNUl3wg9YPj+OPGARKKJUdUJ0NGUDQBcBAv5ds8LhbSbJSbPkbkwH/a1QMz4nEdn6lRDKI1aFIn43QhBSCFqvUq6TPJlbIJ0ZjE+PyZjHFBKCgkry0DHPXU2BbtIZPsksQnN3fx240a9K6sN7peZnLpEoMoq23FEz4g==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5ndaik1GD0nyTdqkZgURQZGW+RGxCdBITPXIwpjhhaD0SXGa4XSZBEBoiPdY6XV6pOfUJeyfi9dXsY4MmT0D+sKoST3rSw96xaf9FXPvOjn4prMTdj3Ji3CyQrGWeQU2nzYqFrp1QYNLAbaViHRKuJrYHI6GCvqCbJe0LQ8qqUiVMA9wG/PQwScpNmTF9Kp2Iej+Z5OUxF33zzm+vg/nYV31HLF7fJUAplI/1nM+ZG8K+AXWgYKChtknl3sW9PCQa3a3imPL9GVToUNxc0wcuTil8mqveWcSQCHYxsIaUajWLpFzoO2AhK4mfYBSStAqEjoXRTuj17mo8Q6M2SHOcwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQBonMu8oa3vmNAa4RQP8gPGlX3SQaA3WCRUAj6Zrlk8AesKV1YSkh5D2l+yUk6njysgzfr1bIR5xF8eup5xXc4/G7NtVYRSMvrd6rfQcHOyK5UFJLm+8utmyMIDrZOzLQuTsT8NxFpbCVCfV5wNRu4rChrCuArYVGaKbmp9ymkw1PU6+HoO5i2wU3ikTmRv8IRjrlSStyNzXpnPTwt7bja19ousk56r40SmlmC04GdDHErr0ei2UbjUua5kw71Qn9g02tL9fERI2sSRjQrvPbn9INwRWl5+k05mlKekbtbu2ev2woJFZK4WEXAd/GaAdeZZdumv8T2idDFL7cAirJwcrbfpawPeXr52oKTPnXfi0l5+g9Gnt/wfiXCrPElX6ycTR6iL3GC2VR4jTz6YatT4Ntz59/THOT7NJQhr6AyLkhhJCdkzE2cob/KouVp4ivV7Q3Fc6HX7eepHAAF/DpxwgOrg9smX6coXLgfp0b1RU2u/tUNID04rpNxTMueTtrT8WSskqvaJd3RH8r7cnRj6Y2hltkja82HlpDURDxDTRvv+krbwMr26SB/40BjpMUrDRCeKuiBahC0DCoU/4+ze1l94wVUhdkCfL0GpJrMSCDEK+XEurU18Hb7WT+ThXbkdl6VpFdHsRvqAnhR2g4b+Qzgidmuky5NUZVfEaZqV/g== 4.查看激活成功没有：","link":"/2020/01/11/04tools/01Goland%E7%A0%B4%E8%A7%A3/"},{"title":"01 关于log4J的配置","text":"一、介绍Log4j是Apache的一个开放源代码项目，通过使用Log4j，我们可以控制日志信息输送的目的地是控制台、文件、GUI组件、甚至是套接口服务 器、NT的事件记录器、UNIX Syslog守护进程等；我们也可以控制每一条日志的输出格式；通过定义每一条日志信息的级别，我们能够更加细致地控制日志的生成过程。Log4j由三个重要的组件构成：日志信息的优先级，日志信息的输出目的地，日志信息的输出格式。日志信息的优先级从高到低有ERROR、WARN、 INFO、DEBUG，分别用来指定这条日志信息的重要程度；日志信息的输出目的地指定了日志将打印到控制台还是文件中；而输出格式则控制了日志信息的显示内容。 二、配置文件其实您也可以完全不使用配置文件，而是在代码中配置Log4j环境。但是，使用配置文件将使您的应用程序更加灵活。Log4j支持两种配置文件格式，一种是XML格式的文件，一种是properties格式的文件。下面我们介绍使用properties格式做为配置文件的方法：示例： 1234log4j.rootLogger=INFO, A1 log4j.appender.A1=org.apache.log4j.ConsoleAppender log4j.appender.A1.layout=org.apache.log4j.PatternLayout log4j.appender.A1.layout.ConversionPattern=%-4r %-5p [%t] %37c %3x - %m%n 配置根Logger，其语法为：log4j.rootLogger = [ level ] , appenderName, appenderName, …其中，level 是日志记录的优先级，分为OFF、FATAL、ERROR、WARN、INFO、DEBUG、ALL或者您定义的级别。Log4j建议只使用四个级别，优先级从高到低分别是ERROR、WARN、INFO、DEBUG。通过在这里定义的级别，您可以控制到应用程序中相应级别的日志信息的开关。比如在这里定义了INFO级别，则应用程序中所有DEBUG级别的日志信息将不被打印出来。appenderName就是指定日志信息输出到哪个地方。您可以同时指定多个输出目的地。 log4j.appender.appenderName = fully.qualified.name.of.appender.class log4j.appender.appenderName.option1 = value1 12345678910111213141516171819202122232425262728293031323334353637383940 … log4j.appender.appenderName.option = valueN 其中，Log4j提供的appender有以下几种： org.apache.log4j.ConsoleAppender（控制台）， org.apache.log4j.FileAppender（文件）， org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件）， org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件）， org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方） (1).ConsoleAppender选项 Threshold=WARN:指定日志消息的输出最低层次。 ImmediateFlush=true:默认值是true,意谓着所有的消息都会被立即输出。 Target=System.err：默认情况下是：System.out,指定输出控制台 (2).FileAppender 选项 Threshold=WARN:指定日志消息的输出最低层次。 ImmediateFlush=true:默认值是true,意谓着所有的消息都会被立即输出。 File=mylog.txt:指定消息输出到mylog.txt文件。 Append=false:默认值是true,即将消息增加到指定文件中，false指将消息覆盖指定的文件内容。 (3).DailyRollingFileAppender 选项 Threshold=WARN:指定日志消息的输出最低层次。 ImmediateFlush=true:默认值是true,意谓着所有的消息都会被立即输出。 File=mylog.txt:指定消息输出到mylog.txt文件。 Append=false:默认值是true,即将消息增加到指定文件中，false指将消息覆盖指定的文件内容。 DatePattern=’.'yyyy-ww:每周滚动一次文件，即每周产生一个新的文件。当然也可以指定按月、周、天、时和分。即对应的格式如下： 1)’.'yyyy-MM: 每月 2)’.'yyyy-ww: 每周 3)’.'yyyy-MM-dd: 每天 4)’.'yyyy-MM-dd-a: 每天两次 5)’.'yyyy-MM-dd-HH: 每小时 6)’.'yyyy-MM-dd-HH-mm: 每分钟 (4).RollingFileAppender 选项 Threshold=WARN:指定日志消息的输出最低层次。 ImmediateFlush=true:默认值是true,意谓着所有的消息都会被立即输出。 File=mylog.txt:指定消息输出到mylog.txt文件。 Append=false:默认值是true,即将消息增加到指定文件中，false指将消息覆盖指定的文件内容。 MaxFileSize=100KB: 后缀可以是KB, MB 或者是 GB. 在日志文件到达该大小时，将会自动滚动，即将原来的内容移到mylog.log.1文件。 MaxBackupIndex=2:指定可以产生的滚动文件的最大数。 \\3. 配置日志信息的布局，其语法为： log4j.appender.appenderName.layout = fully.qualified.name.of.layout.class log4j.appender.appenderName.layout.option1 = value1 … log4j.appender.appenderName.layout.option = valueN 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354其中，Log4j提供的layout有以下几种： org.apache.log4j.HTMLLayout（以HTML表格形式布局）， org.apache.log4j.PatternLayout（可以灵活地指定布局模式）， org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串）， org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等等信息） 其中，Log4j提供的layout有以下几种： org.apache.log4j.HTMLLayout（以HTML表格形式布局）， org.apache.log4j.PatternLayout（可以灵活地指定布局模式）， org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串）， org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等等信息） 4、输出格式设置 在配置文件中可以通过log4j.appender.A1.layout.ConversionPattern设置日志输出格式。 参数： %p: 输出日志信息优先级，即DEBUG，INFO，WARN，ERROR，FATAL, %d: 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy MMM dd HH:mm:ss,SSS}，输出类似：2002年10月18日 22：10：28，921 %r: 输出自应用启动到输出该log信息耗费的毫秒数 %c: 输出日志信息所属的类目，通常就是所在类的全名 %t: 输出产生该日志事件的线程名 %l: 输出日志事件的发生位置，相当于%C.%M(%F:%L)的组合,包括类目名、发生的线程，以及在代码中的行数。举例：Testlog4.main(TestLog4.java:10) %x: 输出和当前线程相关联的NDC(嵌套诊断环境),尤其用到像java servlets这样的多客户多线程的应用中。 %%: 输出一个”%”字符 %F: 输出日志消息产生时所在的文件名称 %L: 输出代码中的行号 %m: 输出代码中指定的消息,产生的日志具体信息 %n: 输出一个回车换行符，Windows平台为”\\r\\n”，Unix平台为”\\n”输出日志信息换行 可以在%与模式字符之间加上修饰符来控制其最小宽度、最大宽度、和文本的对齐方式。如： 1)%20c：指定输出category的名称，最小的宽度是20，如果category的名称小于20的话，默认的情况下右对齐。 2)%-20c:指定输出category的名称，最小的宽度是20，如果category的名称小于20的话，”-”号指定左对齐。 3)%.30c:指定输出category的名称，最大的宽度是30，如果category的名称大于30的话，就会将左边多出的字符截掉，但小于30的话也不会有空格。 4)%20.30c:如果category的名称小于20就补空格，并且右对齐，如果其名称长于30字符，就从左边交远销出的字符截掉。 三、在程序中的使用 在程序中使用Log4j之前，首先要将commons-logging.jar和logging-log4j-1.2.9.jar导入到classpath中，并将log4j.properties放于src根目录中。接下来就可以使用了。1.得到记录器 使用Log4j，第一步就是获取日志记录器，这个记录器将负责控制日志信息。其语法为： public static Logger getLogger( String name)， 通过指定的名字获得记录器，如果必要的话，则为这个名字创建一个新的记录器。Name一般取本类的名字，比如： static Logger logger = Logger.getLogger ( ServerWithLog4j.class.getName () ) ; 注：推荐使用commons-logging结合log4j进行日志记录 private static Log logger = LogFactory.getLog(Yourclass.class); 2.插入记录信息（格式化日志信息） 当上两个必要步骤执行完毕，您就可以轻松地使用不同优先级别的日志记录语句插入到您想记录日志的任何地方，其语法如下： Logger.debug ( Object message ) ; Logger.info ( Object message ) ; Logger.warn ( Object message ) ; Logger.error ( Object message ) ; 四、Log4j比较全面的配置 LOG4J的配置之简单使它遍及于越来越多的应用中了：Log4J配置文件实现了输出到控制台、文件、回滚文件、发送日志邮件、输出到数据库日志表、自定义标签等全套功能。择其一二使用就够用了。 log4j.rootLogger=DEBUG,CONSOLE,A1,im log4j.addivity.org.apache=``true # 应用于控制台 log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender log4j.appender.Threshold=DEBUG log4j.appender.CONSOLE.Target=System.out log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout log4j.appender.CONSOLE.layout.ConversionPattern=[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n #log4j.appender.CONSOLE.layout.ConversionPattern=[start]%d{DATE}[DATE]%n%p[PRIORITY]%n%x[NDC]%n%t[thread] n%c[CATEGORY]%n%m[MESSAGE]%n%n #应用于文件 log4j.appender.FILE=org.apache.log4j.FileAppender log4j.appender.FILE.File=file.log log4j.appender.FILE.Append=``false log4j.appender.FILE.layout=org.apache.log4j.PatternLayout log4j.appender.FILE.layout.ConversionPattern=[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n # Use ``this` `layout ``for` `LogFactor ``5` `analysis # 应用于文件回滚 log4j.appender.ROLLING_FILE=org.apache.log4j.RollingFileAppender log4j.appender.ROLLING_FILE.Threshold=ERROR log4j.appender.ROLLING_FILE.File=rolling.log ``//文件位置,也可以用变量${java.home}、rolling.log log4j.appender.ROLLING_FILE.Append=``true` `//true:添加 false:覆盖 log4j.appender.ROLLING_FILE.MaxFileSize=10KB ``//文件最大尺寸 log4j.appender.ROLLING_FILE.MaxBackupIndex=``1` `//备份数 log4j.appender.ROLLING_FILE.layout=org.apache.log4j.PatternLayout log4j.appender.ROLLING_FILE.layout.ConversionPattern=[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n 12 #应用于socket log4j.appender.SOCKET=org.apache.log4j.RollingFileAppender log4j.appender.SOCKET.RemoteHost=localhost log4j.appender.SOCKET.Port=``5001 log4j.appender.SOCKET.LocationInfo=``true # Set up ``for` `Log Facter ``5 log4j.appender.SOCKET.layout=org.apache.log4j.PatternLayout log4j.appender.SOCET.layout.ConversionPattern=[start]%d{DATE}[DATE]%n%p[PRIORITY]%n%x[NDC]%n%t[thread]%n%c[CATEGORY]%n%m[MESSAGE]%n%n 12 # Log Factor ``5` `Appender log4j.appender.LF5_APPENDER=org.apache.log4j.lf5.LF5Appender log4j.appender.LF5_APPENDER.MaxNumberOfRecords=``2000 # 发送日志给邮件 log4j.appender.MAIL=org.apache.log4j.net.SMTPAppender log4j.appender.MAIL.Threshold=FATAL log4j.appender.MAIL.BufferSize=``10 log4j.appender.MAIL.From=web``@www``.wuset.com log4j.appender.MAIL.SMTPHost=www.wusetu.com log4j.appender.MAIL.Subject=Log4J Message log4j.appender.MAIL.To=web``@www``.wusetu.com log4j.appender.MAIL.layout=org.apache.log4j.PatternLayout log4j.appender.MAIL.layout.ConversionPattern=[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n # 用于数据库 log4j.appender.DATABASE=org.apache.log4j.jdbc.JDBCAppender log4j.appender.DATABASE.URL=jdbc:mysql:``//localhost:3306/test log4j.appender.DATABASE.driver=com.mysql.jdbc.Driver log4j.appender.DATABASE.user=root log4j.appender.DATABASE.password= log4j.appender.DATABASE.sql=INSERT INTO LOG4J (Message) VALUES (’[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n’) log4j.appender.DATABASE.layout=org.apache.log4j.PatternLayout log4j.appender.DATABASE.layout.ConversionPattern=[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n 12 log4j.appender.A1=org.apache.log4j.DailyRollingFileAppender log4j.appender.A1.File=SampleMessages.log4j log4j.appender.A1.DatePattern=yyyyMMdd-HH’.log4j’ log4j.appender.A1.layout=org.apache.log4j.xml.XMLLayout #自定义Appender log4j.appender.im = net.cybercorlin.util.logger.appender.IMAppender log4j.appender.im.host = mail.cybercorlin.net log4j.appender.im.username = username log4j.appender.im.password = password log4j.appender.im.recipient = corlin``@cybercorlin``.net log4j.appender.im.layout=org.apache.log4j.PatternLayout log4j.appender.im.layout.ConversionPattern =[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n","link":"/2013/07/08/05Java/01%20log4j%E4%BB%8B%E7%BB%8D/"}],"tags":[{"name":"博客","slug":"博客","link":"/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"IT新闻","slug":"IT新闻","link":"/tags/IT%E6%96%B0%E9%97%BB/"},{"name":"Golang","slug":"Golang","link":"/tags/Golang/"},{"name":"tools","slug":"tools","link":"/tags/tools/"},{"name":"log4j","slug":"log4j","link":"/tags/log4j/"}],"categories":[{"name":"博客","slug":"博客","link":"/categories/%E5%8D%9A%E5%AE%A2/"},{"name":"IT新闻","slug":"IT新闻","link":"/categories/IT%E6%96%B0%E9%97%BB/"},{"name":"Golang","slug":"Golang","link":"/categories/Golang/"},{"name":"tools","slug":"tools","link":"/categories/tools/"},{"name":"java","slug":"java","link":"/categories/java/"}]}